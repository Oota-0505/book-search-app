# 📋 要件定義書

## 1. プロジェクトの目的

**4つの場所を一度に検索できる本在庫アプリを作りたいです**

本を探す際に、複数の図書館や書店のサイトを個別に検索するのは手間がかかります。一度の検索で複数の場所の在庫状況を同時に確認できるアプリケーションを作成することで、効率的に本を見つけられるようにしたい。

## 2. 機能要件

### 2.1 横断検索機能
- **目的**: 複数の図書館・書店の在庫を一度に検索できるようにする
- **対象サイト**:
  - 岐阜市立図書館
  - 可児市立図書館
  - 岐阜駅本屋（三省堂書店）
  - 草叢BOOKS（各務原店）
- **検索方法**: キーワード検索に対応
- **表示内容**: 各サイトの在庫状況（あり/なし/貸出中など）を一目で確認できる

### 2.2 本の概要表示機能
- **目的**: 検索した本について、基本的な情報（タイトル、著者、概要など）を表示する
- **データ取得方法**: Google Books APIを利用（無料枠）
- **表示内容**:
  - 表紙画像
  - タイトル・サブタイトル
  - 著者名
  - 出版日
  - ISBN
  - 概要（5行程度）

### 2.3 検索履歴機能
- **目的**: 過去に検索したキーワードを簡単に再検索できるようにする
- **保存件数**: 最大5件まで
- **表示方法**: ボタン形式で表示し、クリックで再検索可能

### 2.4 外部リンク機能
- **目的**: 各サイトの詳細ページやAmazonへのアクセスを容易にする
- **実装内容**:
  - 各図書館・書店の検索結果ページへのリンク
  - Amazonの検索結果ページへのリンク（別タブで開く）

## 3. 非機能要件

### 3.1 ユーザビリティ
- **UI/UX**: 見やすく、使いやすいインターフェース
- **レスポンシブ対応**: PC・スマートフォンで使いやすいレイアウト
- **視覚的な分かりやすさ**: 在庫状況が一目で分かる（カード型デザイン、色分け）

### 3.2 パフォーマンス
- **検索速度**: 4つのサイトを並行して検索し、結果を素早く表示
- **タイムアウト設定**: 各サイトへのリクエストは適切なタイムアウトを設定
- **エラーハンドリング**: 一部のサイトでエラーが発生しても、他のサイトの結果は表示

### 3.3 コスト
- **無料で利用可能**: 有料のAPIキーやサービスは使用しない
- **Google Books API**: 無料枠の範囲内で利用

### 3.4 セキュリティ・倫理
- **スクレイピングの注意**: 各サイトの利用規約を尊重し、短時間の大量アクセスは避ける
- **個人利用前提**: 学習・個人利用目的での使用を想定

## 4. 技術要件

### 4.1 プログラミング言語・フレームワーク
- **言語**: Python 3.9以上
- **Webフレームワーク**: Streamlit（シンプルで高速な開発が可能）
- **HTTP通信**: requestsライブラリ
- **HTML解析**: BeautifulSoup4（スクレイピング用）

### 4.2 外部API・サービス
- **Google Books API**: 本の書誌情報取得（無料・APIキー不要）
- **対象サイト**: 各図書館・書店のWebサイト（HTML解析）

### 4.3 デプロイ環境
- **ローカル開発**: Streamlitをローカルで起動
- **クラウドデプロイ**: Streamlit Cloudなどでの公開を想定（任意）

## 5. 制約事項・注意点

### 5.1 スクレイピングに関する注意
- 各サイトの利用規約を確認し、遵守する
- 短時間の大量アクセスは避ける
- 個人利用・学習目的での使用を前提とする
- サイトのHTML構造が変更されると動作しなくなる可能性がある

### 5.2 API制限
- Google Books APIは無料枠の範囲内で利用する
- 過度なリクエストは避ける

### 5.3 検索精度
- 各サイトの検索結果は、サイト側の検索機能に依存する
- 在庫状況の判定は、HTMLの解析に基づくため、サイトの構造変更に影響される可能性がある

## 6. 開発の優先順位

### Phase 1: 基本機能の実装
1. Streamlitアプリの基本構造作成
2. 1つのサイト（例：岐阜市立図書館）の在庫チェック機能実装
3. 検索結果の表示

### Phase 2: 横断検索の実装
1. 残り3つのサイトの在庫チェック機能実装
2. 並行検索の実装
3. 結果の一括表示

### Phase 3: UI/UXの改善
1. カード型デザインの実装
2. 検索履歴機能の追加
3. レスポンシブ対応

### Phase 4: 追加機能
1. Google Books APIを使った本の概要表示
2. 外部リンク機能の実装
3. エラーハンドリングの強化

## 7. 成功基準

- ✅ 4つの場所の在庫を一度の検索で確認できる
- ✅ 検索結果が分かりやすく表示される
- ✅ 本の概要情報（表紙画像・要約）が表示される
- ✅ 無料で利用できる
- ✅ ローカル環境で動作する

